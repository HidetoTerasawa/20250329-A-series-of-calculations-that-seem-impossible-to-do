<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>未分類</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="Uncategorized.js" defer></script>
  </head>
  <body>
    <header>
      <h1>未分類</h1>
      <nav>
        <ul>
          <li><a href="#reverse-alarm">逆算目覚まし設定</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <!-- 逆算目覚まし設定セクション -->
      <section id="reverse-alarm">
        <h2>逆算目覚まし設定</h2>
        <form onsubmit="event.preventDefault(); calculateAlarms();">
          <div>
            <h3>到着日時</h3>
            <fieldset>
              <legend>明日出発ですか？</legend>
              <label class="check_lb">
                <input
                  type="radio"
                  name="isTomorrow"
                  value="yes"
                  required
                  checked
                />
                Yes
              </label>
              <label class="check_lb">
                <input type="radio" name="isTomorrow" value="no" />
                No
              </label>
              <div id="dateInputContainer" style="display: none">
                <label for="arrivalDate">外出予定日:</label>
                <input type="date" id="arrivalDate" />
              </div>
            </fieldset>
            <label
              >到着時刻
              <input type="time" id="arrivalTime" required />
            </label>
          </div>

          <div>
            <h3>移動時間（出発地点～目的地）</h3>
            <p>
              渋滞、忘れ物、電車の遅延など、世の中いつ何が起こるかわかりません。
              <br />場所にもよりますが、Google
              Mapで表示された時間から<strong>プラス10分~60分</strong>加算するのがおすすめです。<br />
              遠方、または、初めて行く場所の場合は、さらに余裕を持って計算してください。
            </p>
            <label for="travelTime">出発～目的地まで(分)</label>
            <input
              type="number"
              id="travelTime"
              step="1"
              value="0"
              min="0"
              required
            />
          </div>

          <div>
            <h3>外出準備時間（起床～出発）</h3>
            <fieldset>
              <legend>
                事前準備（荷物の用意、手続き）は全て済みましたか？
              </legend>
              <label class="check_lb">
                <input
                  type="radio"
                  name="preparationDone"
                  value="yes"
                  required
                  checked
                />
                Yes
              </label>
              <label class="check_lb">
                <input type="radio" name="preparationDone" value="no" />
                No
              </label>
              <div id="extraPrepTimeContainer" style="display: none">
                <label for="extraPrepTime">事前準備にかかる時間(分)</label>
                <input type="number" id="extraPrepTime" step="1" />
              </div>
            </fieldset>

            <label for="prepTime"
              >起床～歯磨き・朝食といった基本的な準備(分):</label
            >
            <input
              type="number"
              id="prepTime"
              step="1"
              value="0"
              min="0"
              required
            />
          </div>

          <div>
            <h3>アラーム設定</h3>
            <p>おすすめは4~5回の15分間隔です。</p>
            <label for="alarmCount">(回)</label>
            <input type="number" id="alarmCount" value="4" min="1" required />
            <br />

            <label for="alarmInterval">間隔(分)</label>
            <input
              type="number"
              id="alarmInterval"
              value="15"
              min="1"
              required
            />
          </div>
          <p>
            <button type="submit">計算</button>
          </p>
        </form>

        <div>
          <p>★計算結果★</p>
          <p id="alarmDate">外出予定日: -</p>
          <p id="arrivalTimeResult">到着時刻: -</p>
          <p id="totalPrepTimeResult">移動時間＋準備時間: -</p>
          <p id="departureTimeResult">出発時刻: -</p>
          <p>目覚ましの設定時刻:</p>
          <ul id="alarmTimes"></ul>
        </div>
      </section>
    </main>

    <footer>
      <a href="index.html">メインページに戻る</a>
    </footer>
  </body>
</html>

<!--🔴メモ-->
<!--🔴ここの計算結果に、計算ボタンを押されたら上記の入力フォームから・到着してお
くべき時刻・目的地までの移動時間と準備時間の合計を表示するようにして


以下のように修正して、計算ボタンが押された際に「到着しておくべき時刻」と「目的地
までの移動時間と準備時間の合計」を計算結果に表示するようにします。

### 修正コード例

#### HTMLの修正
```html
<div>
  <p>★計算結果★</p>
  <p id="arrivalTimeResult">到着しておくべき時刻: -</p>
  <p id="totalPrepTimeResult">移動時間と準備時間の合計: - 分</p>
  <p id="alarmDate"></p>
  <p>目覚まし時計の時間:</p>
  <ul id="alarmTimes">
    <li>-</li>
  </ul>
</div>
```

#### JavaScriptの修正
```javascript
function calculateAlarms() {
  const arrivalTime = document.getElementById("arrivalTime").value;
  const isTomorrow = document.querySelector('input[name="isTomorrow"]:checked').value;
  const arrivalDateInput = document.getElementById("arrivalDate").value;
  const travelTime = parseInt(document.getElementById("travelTime").value, 10);
  const prepTime = parseInt(document.getElementById("prepTime").value, 10);
  const preparationDone = document.querySelector('input[name="preparationDone"]:checked').value;
  let extraPrepTime = 0;

  if (preparationDone === "no") {
    extraPrepTime = parseInt(document.getElementById("extraPrepTime").value, 10) || 0;
  }

  if (!arrivalTime || isNaN(travelTime) || isNaN(prepTime) || (preparationDone === "no" && isNaN(extraPrepTime))) {
    alert("正しい値を入力してください。");
    return;
  }

  const [arrivalHour, arrivalMinute] = arrivalTime.split(":").map(Number);
  const arrivalDate = new Date();

  if (isTomorrow === "yes") {
    arrivalDate.setDate(arrivalDate.getDate() + 1);
  } else if (arrivalDateInput) {
    const [year, month, day] = arrivalDateInput.split("-").map(Number);
    arrivalDate.setFullYear(year, month - 1, day);
  }

  arrivalDate.setHours(arrivalHour, arrivalMinute, 0);

  const totalPrepTime = travelTime + prepTime + extraPrepTime;

  // 計算結果を表示
  document.getElementById("arrivalTimeResult").textContent = `到着しておくべき時刻: ${arrivalTime}`;
  document.getElementById("totalPrepTimeResult").textContent = `移動時間と準備時間の合計: ${totalPrepTime} 分`;

  const wakeUpDate = new Date(arrivalDate.getTime() - totalPrepTime * 60 * 1000);

  const alarmTimes = [];
  for (let i = 0; i < 5; i++) {
    const alarmDate = new Date(wakeUpDate.getTime() - i * 15 * 60 * 1000);
    const alarmHour = alarmDate.getHours().toString().padStart(2, "0");
    const alarmMinute = alarmDate.getMinutes().toString().padStart(2, "0");
    alarmTimes.push(`${alarmHour}:${alarmMinute}`);
  }

  const alarmTimesList = document.getElementById("alarmTimes");
  alarmTimesList.innerHTML = "";
  alarmTimes.forEach((time) => {
    const li = document.createElement("li");
    li.textContent = time;
    alarmTimesList.appendChild(li);
  });

  const alarmDateElement = document.getElementById("alarmDate");
  const wakeUpDateString = wakeUpDate.toLocaleDateString("ja-JP", {
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
  });
  alarmDateElement.textContent = `目覚まし時計の日付: ${wakeUpDateString}`;
}
```

### 修正内容
1. **HTML**:
   - 計算結果を表示するための新しい要素 `<p id="arrivalTimeResult">` と `<p
     id="totalPrepTimeResult">` を追加。
2. **JavaScript**:
   - 到着時刻 (`arrivalTime`) と移動時間と準備時間の合計 (`totalPrepTime`) を計
     算して、それぞれの要素に表示。

### 動作説明
1. **到着しておくべき時刻**:
   - 入力された到着時刻をそのまま表示。
2. **移動時間と準備時間の合計**:
   - 移動時間、準備時間、追加準備時間を合計して表示。
3. **目覚まし時計の時間**:
   - 15分おきに5つの目覚まし時間を計算してリストに表示。
4. **目覚まし時計の日付**:
   - 計算された目覚まし時計の最初の時間の日付を表示。-->
<!--🔴<label for="arrivalTime">🔴目的地に到着しておくべき時間:</label>のところに
明日→Yes or No　の選択肢を用意し、YesならそのままNoを選択したなら日付を入力する
欄を設けて


そして日付の要素を最終的な結果を表示するところ
<ul id="alarmTimes">
        <li>-</li>
      </ul>
らへんにその前日の日付を表示して

以下のように修正を加え、`明日→Yes or No`の選択肢を追加し、`No`の場合は日付を入力
する欄を表示するようにします。また、最終的な結果に前日の日付を表示します。

### 修正コード例

#### HTMLの修正
```html
<section id="reverse-alarm">
  <h2>逆算目覚まし設定</h2>
  <form onsubmit="event.preventDefault(); calculateAlarms();">
    <label for="arrivalTime">🔴目的地に到着しておくべき時間:</label><br>
    <input type="time" id="arrivalTime" required /><br />

    <fieldset>
      <legend>明日ですか？</legend>
      <label><input type="radio" name="isTomorrow" value="yes" required /> Yes</label>
      <label><input type="radio" name="isTomorrow" value="no" /> No</label>
    </fieldset>

    <div id="dateInputContainer" style="display: none;">
      <label for="arrivalDate">到着日付:</label>
      <input type="date" id="arrivalDate" /><br />
    </div>

    <label for="travelTime">●住居から目的地までに到着するまでにかかる移動時間:</label><br>
    <p>世の中何が起こるかわかりません。（渋滞・忘れ物・電車の遅延・etc…）
      <br>場所にもよりますが、google mapで表示された時間から最低でも<strong>＋20分~50分</strong>加算するのがおすすめです。
    </p>
    <input type="number" id="travelTime" step="1" required /> 分<br />

    <label for="prepTime">●起きてから外出準備（歯磨き、朝食、メイク、etc）ができるまでの時間:</label>
    <input type="number" id="prepTime" step="1" required /> 分<br />

    <fieldset>
      <legend>事前準備（荷物・書類・etc）は済みましたか？</legend>
      <label><input type="radio" name="preparationDone" value="yes" required /> Yes</label>
      <label><input type="radio" name="preparationDone" value="no" /> No</label>
    </fieldset>

    <div id="extraPrepTimeContainer" style="display: none;">
      <label for="extraPrepTime">事前準備にかかる時間 (分):</label>
      <input type="number" id="extraPrepTime" step="1" /> 分<br />
    </div>

    <button type="submit">計算</button>
  </form>
  <p>目覚まし時計の時間:</p>
  <ul id="alarmTimes">
    <li>-</li>
  </ul>
  <p id="alarmDate"></p>
</section>
```

#### JavaScriptの修正
```javascript
document.querySelectorAll('input[name="isTomorrow"]').forEach((radio) => {
  radio.addEventListener("change", (event) => {
    const dateInputContainer = document.getElementById("dateInputContainer");
    if (event.target.value === "no") {
      dateInputContainer.style.display = "block";
    } else {
      dateInputContainer.style.display = "none";
    }
  });
});

document.querySelectorAll('input[name="preparationDone"]').forEach((radio) => {
  radio.addEventListener("change", (event) => {
    const extraPrepTimeContainer = document.getElementById("extraPrepTimeContainer");
    if (event.target.value === "no") {
      extraPrepTimeContainer.style.display = "block";
    } else {
      extraPrepTimeContainer.style.display = "none";
    }
  });
});

function calculateAlarms() {
  const arrivalTime = document.getElementById("arrivalTime").value;
  const isTomorrow = document.querySelector('input[name="isTomorrow"]:checked').value;
  const arrivalDateInput = document.getElementById("arrivalDate").value;
  const travelTime = parseInt(document.getElementById("travelTime").value, 10);
  const prepTime = parseInt(document.getElementById("prepTime").value, 10);
  const preparationDone = document.querySelector('input[name="preparationDone"]:checked').value;
  let extraPrepTime = 0;

  if (preparationDone === "no") {
    extraPrepTime = parseInt(document.getElementById("extraPrepTime").value, 10) || 0;
  }

  if (!arrivalTime || isNaN(travelTime) || isNaN(prepTime) || (preparationDone === "no" && isNaN(extraPrepTime))) {
    alert("正しい値を入力してください。");
    return;
  }

  const [arrivalHour, arrivalMinute] = arrivalTime.split(":").map(Number);
  const arrivalDate = new Date();

  if (isTomorrow === "yes") {
    arrivalDate.setDate(arrivalDate.getDate() + 1);
  } else if (arrivalDateInput) {
    const [year, month, day] = arrivalDateInput.split("-").map(Number);
    arrivalDate.setFullYear(year, month - 1, day);
  }

  arrivalDate.setHours(arrivalHour, arrivalMinute, 0);

  const totalPrepTime = travelTime + prepTime + extraPrepTime;
  const wakeUpDate = new Date(arrivalDate.getTime() - totalPrepTime * 60 * 1000);

  const alarmTimes = [];
  for (let i = 0; i < 5; i++) {
    const alarmDate = new Date(wakeUpDate.getTime() - i * 15 * 60 * 1000);
    const alarmHour = alarmDate.getHours().toString().padStart(2, "0");
    const alarmMinute = alarmDate.getMinutes().toString().padStart(2, "0");
    alarmTimes.push(`${alarmHour}:${alarmMinute}`);
  }

  const alarmTimesList = document.getElementById("alarmTimes");
  alarmTimesList.innerHTML = "";
  alarmTimes.forEach((time) => {
    const li = document.createElement("li");
    li.textContent = time;
    alarmTimesList.appendChild(li);
  });

  const alarmDateElement = document.getElementById("alarmDate");
  const wakeUpDateString = wakeUpDate.toLocaleDateString("ja-JP", {
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
  });
  alarmDateElement.textContent = `目覚まし時計の日付: ${wakeUpDateString}`;
}
```

### 動作説明
1. **明日かどうかの選択**:
   - `Yes`を選択すると日付入力欄は非表示。
   - `No`を選択すると日付入力欄が表示され、到着日付を入力可能。
2. **目覚まし時計の時間計算**:
   - 到着時間と日付、移動時間、準備時間、追加準備時間を基に計算。
   - 15分おきに5つの目覚まし時間を生成。
3. **結果表示**:
   - 目覚まし時計の時間をリスト表示。
   - 目覚まし時計の前日の日付を表示。-->
<!--🔴入力ホームを以下の内容に修正して
・目的地に到着しておくべき時間
・住居から目的地までに到着するまでにかかる移動時間（世の中何が起こるかわからない！google mapで出た時間から＋20分~50分でみておこう！）
・起きてから外出準備（歯磨き、朝食、メイク、etc）ができるまでの時間
・事前準備（荷物・書類・etc）は済んだ？→Yes or No
Noを選んだ場合はその事前準備にかかる時間の入力ホーム
Yesを選んだなら入力ホームは非表示

＃上記の情報から目的地に到着しておくべき時間に加算して目覚まし時計の時間を15分おきに5セット分自動生成して


-->
<!--🔴<li> <a href="Uncategorized.html">未分類</a> <ul> <li>逆算目覚まし設
        定</li> <li>購入判断</li> </ul> </li>メインページはこうなってるので<li>
        逆算目覚まし設定</li>の部分のセクションをつくって



以下は「逆算目覚まし設定」セクションを作成するコード例です。このセクションでは、
起床時間を設定し、必要な睡眠時間を入力することで、逆算して何時に寝るべきかを計算
します。

### 修正コード例

#### HTMLの追加
```html
<section id="reverse-alarm">
  <h2>逆算目覚まし設定</h2>
  <form onsubmit="event.preventDefault(); calculateBedtime();">
    <label for="wakeUpTime">起床時間:</label>
    <input type="time" id="wakeUpTime" required /><br />

    <label for="sleepDuration">必要な睡眠時間 (時間):</label>
    <input type="number" id="sleepDuration" step="0.5" required /> 時間<br />

    <button type="submit">計算</button>
  </form>
  <p>寝るべき時間: <span id="bedtimeResult">-</span></p>
</section>
```

#### JavaScriptの追加
```javascript
function calculateBedtime() {
  const wakeUpTime = document.getElementById("wakeUpTime").value;
  const sleepDuration = parseFloat(document.getElementById("sleepDuration").value);

  if (!wakeUpTime || isNaN(sleepDuration) || sleepDuration <= 0) {
    alert("正しい値を入力してください。");
    return;
  }

  const [wakeHour, wakeMinute] = wakeUpTime.split(":").map(Number);
  const wakeUpDate = new Date();
  wakeUpDate.setHours(wakeHour, wakeMinute, 0);

  const bedtimeDate = new Date(wakeUpDate.getTime() - sleepDuration * 60 * 60 * 1000);
  const bedtimeHour = bedtimeDate.getHours().toString().padStart(2, "0");
  const bedtimeMinute = bedtimeDate.getMinutes().toString().padStart(2, "0");

  document.getElementById("bedtimeResult").textContent = `${bedtimeHour}:${bedtimeMinute}`;
}
```

### 動作説明
1. **起床時間**を`<input type="time">`で入力。
2. **必要な睡眠時間**を`<input type="number">`で入力。
3. `calculateBedtime`関数で、起床時間から必要な睡眠時間を引いて寝るべき時間を計
   算。
4. 計算結果を`<span id="bedtimeResult">`に表示。

### 結果例
- 起床時間: `07:00`
- 必要な睡眠時間: `8`
- 結果: `23:00`   -->
